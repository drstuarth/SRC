<!DOCTYPE html>
<html lang="zxx">
<head>
    <!-- for-meta-tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Health Plus Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
    Smartphone Compatible web template, free web designs for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.emailjs.com/sdk/3.2.0/email.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://cdn.emailjs.com/sdk/3.2.0/email.min.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <!-- font-awesome icons -->
    <link href="css/font-awesome.css" rel="stylesheet"> 
    <!-- //font-awesome icons -->
</head>
<body>
<div class="main" id="home">
    <div class="header_agileinfo">
        <div class="w3_agileits_header_text">
            <ul class="top_agile_w3l_info_icons">
                <li><i class="fa fa-home" aria-hidden="true"></i>WTC Ciudad de México</li>
                <li class="second"><i class="fa fa-phone" aria-hidden="true"></i>(+52) 5621204896</li>
                <li><i class="fa fa-envelope-o" aria-hidden="true"></i><a href="mailto:er.vikashs4@gmail.com">drstuarthgonz@gmail.com</a></li>
            </ul>
        </div>
        <div class="agileinfo_social_icons">
            <ul class="agileits_social_list">
                <li><a href="https://www.facebook.com/" class="w3_agile_facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                <li><a href="https://twitter.com/" class="agile_twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                <li><a href="https://www.linkedin.com/in/vikash-kumar-040006166/" class="w3_agile_linkedin"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
            </ul>
        </div>
        <div class="clearfix"> </div>
    </div>              
    <div class="header-bottom">
        <nav class="navbar navbar-default">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="logo">
                    <h3><a class="navbar-brand" href="index.html"> Dr. Stuarth <p>Gonzalez</p></a></h3>
                </div>
            </div>
            <div class="collapse navbar-collapse nav-wil" id="bs-example-navbar-collapse-1">
                <nav class="menu menu--sebastian">
                    <ul id="m_nav_list" class="m_nav menu__list">
                        <li class="m_nav_item menu__item" id="m_nav_item_1"> <a href="index.html" class="menu__link"> Inicio&nbsp; </a></li>
                        <li class="m_nav_item menu__item" id="moble_nav_item_2"> <a href="about.html" class="menu__link">Nosotros</a> </li>       
                        <li class="m_nav_item menu__item menu__item--current" id="moble_nav_item_4"> <a href="appointment.html" class="menu__link">Citas&nbsp;&nbsp; </a> </li>
                        <li class="m_nav_item menu__item" id="moble_nav_item_5"> <a href="gallery.html" class="menu__link">Galeria</a> </li>
                        <li class="m_nav_item menu__item" id="moble_nav_item_6"> <a href="contact.html" class="menu__link">Contacto</a> </li>
                        <li class="m_nav_item menu__item" id="moble_nav_item_3 dropdown"> <a href="#" class="menu__link dropdown-toggle" data-toggle="dropdown">Sesion<b class="caret"></b></a> 
                            <ul class="dropdown-menu agile_short_dropdown">
                                <!-- <li><a href="dlogin.html">Doctor</a></li>
                                <li><a href="plogin.html">Patient</a></li><br>
                                <li><a href="login.php">Admin</a></li> -->
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
        </nav>
    </div>
</div>
<!-- banner -->

<!-- icons -->
<div class="banner-bottom" id="about">
    <div class="container">
        <h2 class="w3_heade_tittle_agile">Reserva tú Cita</h2>
        <p class="sub_t_agileits">Anhora mismo</p>
        <div class="book-appointment">
            <h4>Rellena el formulario</h4>
            <form id="appointmentForm">
                <div class="left-agileits-w3layouts same">
                    <div class="gaps">
                        <p>Nombre completo</p>
                        <input type="text" name="patientName" placeholder="" required=""/>
                    </div>
                    <div class="gaps">
                        <p>Numero Telefonico</p>
                        <input type="text" name="phoneNumber" placeholder="" required=""/>
                    </div>
                    <div class="gaps">
                        <p>Email</p>
                        <input type="email" name="email" placeholder="" required="" />
                    </div>
                    <div class="gaps">
                        <p>Sintomas</p>
                        <textarea name="symptoms" placeholder="" required=""></textarea>
                    </div>
                </div>
                <div class="right-agileinfo same">
                    <div class="gaps">
                        <p>Fecha</p>
                        <input id="datepicker1" name="date" type="text" value="" required="">
                    </div>
                    <div class="gaps">
                        <p>Area</p>
                        <select name="area" class="option" required>
                            <option value=""></option>
                            <option value="Ginecologia">Ginecologia</option>
                            <option value="Obstetricia">Obstetricia</option>
                            <option value="Tratamiento">Tratamiento</option>
                            <option value="Prenatal">Prenatal</option>
                            <option value="Terapia">Terapia</option>
                        </select>
                    </div>
                    <div class="gaps">
                        <p>Sexo</p>
                        <select name="gender" class="option" required>
                            <option value=""></option>
                            <option value="Femenino">Femenino</option>
                            <option value="Masculino">Masculino</option>
                        </select>
                    </div>
                    <div class="gaps">
                        <p>Tiempo</p>
                        <input type="text" id="timepicker" name="time" class="timepicker option" required>
                    </div>
                </div>
                <div class="clearfix"></div>
                <input type="submit" value="Reserva">
            </form>
        </div>
    </div>
</div>

<script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAQ62IM8yEMdPdQFepP9Faojj3JK8oryzc",
        authDomain: "sistemareservaciones-584be.firebaseapp.com",
        projectId: "sistemareservaciones-584be",
        storageBucket: "sistemareservaciones-584be.appspot.com",
        messagingSenderId: "1060448849855",
        appId: "1:1060448849855:web:335be69bdc4e6bf7145b0a",
        measurementId: "G-K9487NEQ7W"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // EmailJS initialization
    (function() {
        emailjs.init("bL-QhKLOxq-zQw3q4"); // Public Key
    })();

    // Form submission handler
    document.getElementById('appointmentForm').addEventListener('submit', function(event) {
        event.preventDefault();

        // Get form data
        const formData = new FormData(event.target);
        const appointmentData = {};
        formData.forEach((value, key) => {
            appointmentData[key] = value;
        });

        // Save data to Firebase
        const newAppointmentRef = database.ref('appointments').push();
        newAppointmentRef.set(appointmentData)
            .then(() => {
                // Send confirmation email
                emailjs.send("service_SRC", "SRC", appointmentData) // Replace service_SRC and SRC with your actual service and template IDs from EmailJS
                    .then((response) => {
                        alert("Cita reservada y confirmación enviada!");
                    }, (error) => {
                        console.error("Error al enviar el correo: ", error);
                        alert("Cita reservada, pero fallo el envío de confirmación.");
                    });
            })
            .catch((error) => {
                console.error("Error saving data: ", error);
            });
    });

    // Initialize datepicker
    $(function() {
        $("#datepicker1").datepicker({
            dateFormat: "dd/mm/yy",
            minDate: 0
        });

        // Initialize timepicker
        $('#timepicker').timepicker({
            timeFormat: 'HH:mm',
            interval: 60,
            minTime: '07:00',
            maxTime: '20:00',
            dynamic: false,
            dropdown: true,
            scrollbar: true
        });
    });
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.18/jquery.timepicker.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.13.18/jquery.timepicker.min.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <title>Historial de Clientes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/font-awesome.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Historial de Clientes</h1>
        <ul id="client-list" class="list-group">
            <!-- Aquí se mostrarán los clientes -->
        </ul>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // Referencia a la colección de citas
        var appointmentsRef = firebase.firestore().collection('appointments');

        // Referencia al elemento <ul> donde se mostrará la lista de clientes
        var clientList = document.getElementById('client-list');

        // Función para obtener el historial de clientes
        function fetchClientHistory() {
            appointmentsRef.get().then((querySnapshot) => {
                // Limpiar la lista antes de agregar los nuevos elementos
                clientList.innerHTML = '';

                querySnapshot.forEach((doc) => {
                    // Obtener los datos de cada cita
                    var appointmentData = doc.data();

                    // Crear un elemento <li> para mostrar la información del cliente
                    var listItem = document.createElement('li');
                    listItem.className = 'list-group-item';
                    listItem.innerHTML = `
                        <h5>${appointmentData.name}</h5>
                        <p><strong>Fecha:</strong> ${appointmentData.date}</p>
                        <p><strong>Hora:</strong> ${appointmentData.time}</p>
                        <p><strong>Teléfono:</strong> ${appointmentData.phone}</p>
                        <p><strong>Correo Electrónico:</strong> ${appointmentData.email}</p>
                        <p><strong>Comentarios:</strong> ${appointmentData.comments}</p>
                    `;

                    // Agregar el elemento <li> a la lista
                    clientList.appendChild(listItem);
                });
            });
        }

        // Cargar el historial de clientes cuando la página esté lista
        document.addEventListener('DOMContentLoaded', function() {
            fetchClientHistory();
        });
    </script>
</body>
</html>
